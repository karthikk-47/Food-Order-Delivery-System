<nav class="navbar">
  <div class="navbar-container">
    <!-- Logo -->
    <div class="navbar-brand">
      <a routerLink="/" class="logo">
        <span class="logo-icon">ğŸ½ï¸</span>
        <span class="logo-text">HomeBites</span>
      </a>
    </div>

    <!-- Menu Toggle Button (Mobile) -->
    <button class="navbar-toggle" (click)="toggleMenu()" [class.active]="menuOpen">
      <span class="hamburger"></span>
      <span class="hamburger"></span>
      <span class="hamburger"></span>
    </button>

    <!-- Navbar Menu -->
    <div class="navbar-menu" [class.active]="menuOpen">
      <div class="navbar-nav">
        <!-- Nav Items -->
        <div class="nav-group">
          <a 
            routerLink="/{{ currentUser?.role?.toLowerCase() }}/dashboard" 
            routerLinkActive="active"
            (click)="closeMenu()"
            class="nav-link"
            *ngIf="currentUser">
            <span class="nav-icon">ğŸ“Š</span>
            <span>Dashboard</span>
          </a>

          <a 
            [routerLink]="getProfileLink()"
            routerLinkActive="active"
            (click)="closeMenu()"
            class="nav-link"
            *ngIf="currentUser">
            <span class="nav-icon">ğŸ‘¤</span>
            <span>Profile</span>
          </a>

          <!-- Role-specific links -->
          <a 
            routerLink="/user/browse"
            routerLinkActive="active"
            (click)="closeMenu()"
            class="nav-link"
            *ngIf="currentUser?.role === 'USER'">
            <span class="nav-icon">ğŸ½ï¸</span>
            <span>Browse Menus</span>
          </a>

          <a 
            routerLink="/user/cart"
            routerLinkActive="active"
            (click)="closeMenu()"
            class="nav-link"
            *ngIf="currentUser?.role === 'USER'">
            <span class="nav-icon">ğŸ›’</span>
            <span>Cart</span>
          </a>

          <a 
            routerLink="/homemaker/menu"
            routerLinkActive="active"
            (click)="closeMenu()"
            class="nav-link"
            *ngIf="currentUser?.role === 'HOMEMAKER'">
            <span class="nav-icon">ğŸ“‹</span>
            <span>Menu</span>
          </a>

          <a 
            routerLink="/homemaker/wallet"
            routerLinkActive="active"
            (click)="closeMenu()"
            class="nav-link"
            *ngIf="currentUser?.role === 'HOMEMAKER'">
            <span class="nav-icon">ğŸ’³</span>
            <span>Wallet</span>
          </a>

          <a 
            routerLink="/delivery-executive/orders"
            routerLinkActive="active"
            (click)="closeMenu()"
            class="nav-link"
            *ngIf="currentUser?.role === 'DELIVERYEXECUTIVE'">
            <span class="nav-icon">ğŸ“¦</span>
            <span>Orders</span>
          </a>

          <a 
            routerLink="/delivery-executive/wallet"
            routerLinkActive="active"
            (click)="closeMenu()"
            class="nav-link"
            *ngIf="currentUser?.role === 'DELIVERYEXECUTIVE'">
            <span class="nav-icon">ğŸ’³</span>
            <span>Wallet</span>
          </a>
        </div>

      </div>

      <!-- User Info (Mobile) -->
      <div class="navbar-user-info" *ngIf="currentUser">
        <div class="user-profile-card">
          <div class="user-avatar">{{ currentUser.mobile ? currentUser.mobile.charAt(0).toUpperCase() : '?' }}</div>
          <div class="user-details">
            <p class="user-mobile">{{ currentUser.mobile }}</p>
            <p class="user-role">{{ getRoleLabel() }}</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Notification Bell & User Info (Desktop) -->
    <div class="navbar-actions" *ngIf="currentUser">
      <!-- Notification Bell -->
      <div class="notification-wrapper">
        <button class="notification-btn" (click)="toggleNotifications()">
          <span class="bell-icon">ğŸ””</span>
          <span class="notification-badge" *ngIf="unreadCount > 0">
            {{ unreadCount > 99 ? '99+' : unreadCount }}
          </span>
        </button>

        <!-- Notification Dropdown -->
        <div class="notification-dropdown" [class.active]="notificationOpen">
          <div class="notification-header">
            <h4>Notifications</h4>
            <button class="mark-all-btn" (click)="markAllAsRead()" *ngIf="unreadCount > 0">
              Mark all read
            </button>
          </div>
          <div class="notification-list" *ngIf="notifications.length > 0; else noNotifications">
            <div 
              class="notification-item" 
              *ngFor="let notification of notifications.slice(0, 5)"
              [class.unread]="!notification.read"
              (click)="markAsRead(notification)">
              <span class="notification-icon">{{ getNotificationIcon(notification.type) }}</span>
              <div class="notification-content">
                <p class="notification-title">{{ notification.title }}</p>
                <p class="notification-message">{{ notification.message }}</p>
                <span class="notification-time">{{ getTimeAgo(notification.createdAt) }}</span>
              </div>
            </div>
          </div>
          <ng-template #noNotifications>
            <div class="no-notifications">
              <span>ğŸ”•</span>
              <p>No notifications</p>
            </div>
          </ng-template>
        </div>
      </div>

      <!-- User Info -->
      <div class="user-info">
        <span class="user-avatar">{{ currentUser.mobile ? currentUser.mobile.charAt(0).toUpperCase() : '?' }}</span>
        <span class="user-role">{{ getRoleLabel() }}</span>
      </div>
      <button 
        (click)="logout()"
        class="btn btn-logout">
        <span>ğŸšª</span>
        <span>Logout</span>
      </button>
    </div>
  </div>
</nav>
