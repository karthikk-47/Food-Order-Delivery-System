<app-navbar></app-navbar>

<div class="order-container">
  <div class="order-content">
    <div class="menu-section">
      <h2>Menu Items</h2>
      <div class="menu-grid">
        <div class="menu-item" *ngFor="let item of menuItems">
          <img [src]="item.image || 'assets/default-food.png'" [alt]="item.name">
          <div class="item-info">
            <h3>{{ item.name }}</h3>
            <p class="description">{{ item.description }}</p>
            <div class="item-footer">
              <span class="price">₹{{ item.price }}</span>
              <button class="btn-add" (click)="addToCart(item)">Add +</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="cart-section">
      <h2>Your Cart</h2>
      <div class="cart-items" *ngIf="cart.length > 0; else emptyCart">
        <div class="cart-item" *ngFor="let item of cart">
          <div class="item-details">
            <h4>{{ item.name }}</h4>
            <p class="price">₹{{ item.price }} × {{ item.quantity }}</p>
          </div>
          <div class="item-controls">
            <button (click)="removeFromCart(item)">-</button>
            <span>{{ item.quantity }}</span>
            <button (click)="addToCart(item)">+</button>
          </div>
        </div>
      </div>
      <ng-template #emptyCart>
        <p class="empty-message">Your cart is empty</p>
      </ng-template>

      <div class="address-section" *ngIf="cart.length > 0">
        <h3>Delivery Address</h3>
        <select [(ngModel)]="selectedAddress" class="address-select">
          <option *ngFor="let address of addresses" [ngValue]="address">
            {{ address.street }}, {{ address.city }}
          </option>
        </select>
      </div>

      <div class="bill-details" *ngIf="cart.length > 0">
        <h3>Bill Details</h3>
        <div class="bill-row">
          <span>Item Total</span>
          <span>₹{{ total }}</span>
        </div>
        <div class="bill-row">
          <span>Delivery Fee</span>
          <span>₹{{ deliveryFee }}</span>
        </div>
        <div class="bill-row total">
          <span>Total</span>
          <span>₹{{ total + deliveryFee }}</span>
        </div>
      </div>

      <button 
        class="btn-place-order" 
        [disabled]="cart.length === 0 || loading"
        (click)="placeOrder()">
        {{ loading ? 'Processing...' : 'Place Order' }}
      </button>
    </div>
  </div>
</div>
