import{b as N,d as V,g as D,l as W,m as L,n as A,t as B}from"./chunk-2J73YKV5.js";import{a as R}from"./chunk-FQ3DSHQO.js";import{a as z}from"./chunk-OU4M4I6I.js";import{a as F}from"./chunk-VW6JM3DE.js";import"./chunk-CFT3KPZ3.js";import{A as s,B as p,Ca as w,Fa as k,J as l,K as P,R as C,Ra as I,T as m,Ua as T,X as i,Y as t,Z as E,a as M,aa as h,ba as u,ca as d,fa as n,ga as g,ha as b,ia as S,la as x,ma as _,na as v,pa as O,v as y}from"./chunk-DQHUU6N5.js";function j(r,f){if(r&1){let e=h();i(0,"button",18),u("click",function(){s(e);let o=d(2);return p(o.toggleEdit())}),n(1,"\u270F\uFE0F Edit"),t()}}function q(r,f){if(r&1&&(i(0,"div",19)(1,"div",20)(2,"span",12),n(3,"Email:"),t(),i(4,"span",11),n(5),t()(),i(6,"div",20)(7,"span",12),n(8,"License No:"),t(),i(9,"span",11),n(10),t()(),i(11,"div",20)(12,"span",12),n(13,"Aadhar No:"),t(),i(14,"span",11),n(15),t()(),i(16,"div",20)(17,"span",12),n(18,"Vehicle:"),t(),i(19,"span",11),n(20),t()()()),r&2){let e=d(2);l(5),g(e.profile.email||"Not provided"),l(5),g(e.profile.licenseNo||"Not provided"),l(5),g(e.profile.aadharNo||"Not provided"),l(5),S("",e.profile.vehicleType||"N/A"," - ",e.profile.vehicleNumber||"N/A","")}}function Y(r,f){if(r&1){let e=h();i(0,"div",21)(1,"h4"),n(2,"Edit Profile"),t(),i(3,"div",22)(4,"label"),n(5,"Name"),t(),i(6,"input",23),v("ngModelChange",function(o){s(e);let c=d(2);return _(c.editForm.name,o)||(c.editForm.name=o),p(o)}),t()(),i(7,"div",22)(8,"label"),n(9,"Email"),t(),i(10,"input",24),v("ngModelChange",function(o){s(e);let c=d(2);return _(c.editForm.email,o)||(c.editForm.email=o),p(o)}),t()(),i(11,"div",22)(12,"label"),n(13,"Vehicle Type"),t(),i(14,"select",25),v("ngModelChange",function(o){s(e);let c=d(2);return _(c.editForm.vehicleType,o)||(c.editForm.vehicleType=o),p(o)}),i(15,"option",26),n(16,"Select Vehicle"),t(),i(17,"option",27),n(18,"Bicycle"),t(),i(19,"option",28),n(20,"Motorcycle"),t(),i(21,"option",29),n(22,"Scooter"),t(),i(23,"option",30),n(24,"Car"),t()()(),i(25,"div",22)(26,"label"),n(27,"Vehicle Number"),t(),i(28,"input",31),v("ngModelChange",function(o){s(e);let c=d(2);return _(c.editForm.vehicleNumber,o)||(c.editForm.vehicleNumber=o),p(o)}),t()(),i(29,"div",32)(30,"button",33),u("click",function(){s(e);let o=d(2);return p(o.cancelEdit())}),n(31,"Cancel"),t(),i(32,"button",34),u("click",function(){s(e);let o=d(2);return p(o.saveProfile())}),n(33,"Save Changes"),t()()()}if(r&2){let e=d(2);l(6),x("ngModel",e.editForm.name),l(4),x("ngModel",e.editForm.email),l(4),x("ngModel",e.editForm.vehicleType),l(14),x("ngModel",e.editForm.vehicleNumber)}}function U(r,f){if(r&1&&(i(0,"div",35),n(1),t()),r&2){let e=d(2);l(),g(e.successMessage)}}function G(r,f){if(r&1&&(i(0,"div",36),n(1),t()),r&2){let e=d(2);l(),g(e.errorMessage)}}function H(r,f){if(r&1){let e=h();i(0,"div",37)(1,"a",38)(2,"span",39),n(3,"\u{1F4E6}"),t(),i(4,"span"),n(5,"My Deliveries"),t()(),i(6,"a",40)(7,"span",39),n(8,"\u{1F4B0}"),t(),i(9,"span"),n(10,"Wallet"),t()(),i(11,"button",41),u("click",function(){s(e);let o=d(2);return p(o.logout())}),i(12,"span",39),n(13,"\u{1F6AA}"),t(),i(14,"span"),n(15,"Logout"),t()()()}}function J(r,f){if(r&1&&(i(0,"div",3)(1,"div",4)(2,"div",5),n(3),t(),i(4,"div",6)(5,"h3"),n(6),t(),i(7,"p"),n(8),t(),i(9,"div",7),n(10),t()(),C(11,j,2,0,"button",8),t(),i(12,"div",9)(13,"div",10)(14,"span",11),n(15),t(),i(16,"span",12),n(17,"Total Deliveries"),t()(),i(18,"div",10)(19,"span",11),n(20),t(),i(21,"span",12),n(22,"Total Earnings"),t()()(),C(23,q,21,5,"div",13)(24,Y,34,4,"div",14)(25,U,2,1,"div",15)(26,G,2,1,"div",16)(27,H,16,0,"div",17),t()),r&2){let e=d();l(3),g((e.profile.name==null?null:e.profile.name.charAt(0))||"D"),l(3),g(e.profile.name),l(2),b("\u{1F4F1} ",e.profile.mobile,""),l(2),b("\u2B50 ",(e.profile.averageRating||0).toFixed(1),""),l(),m("ngIf",!e.editing),l(4),g(e.profile.totalDeliveries||0),l(5),b("\u20B9",(e.profile.totalEarnings||0).toFixed(0),""),l(3),m("ngIf",!e.editing),l(),m("ngIf",e.editing),l(),m("ngIf",e.successMessage),l(),m("ngIf",e.errorMessage),l(),m("ngIf",!e.editing)}}function K(r,f){r&1&&(i(0,"div",42),n(1,"Loading profile..."),t())}var le=(()=>{class r{constructor(e,a){this.deliveryService=e,this.authService=a,this.profile=null,this.loading=!1,this.editing=!1,this.executiveId=0,this.editForm={name:"",email:"",vehicleType:"",vehicleNumber:""},this.successMessage="",this.errorMessage="";let o=this.authService.currentUserValue;o&&(this.executiveId=o.id)}ngOnInit(){this.loadProfile()}loadProfile(){this.loading=!0,this.deliveryService.getProfile(this.executiveId).subscribe({next:e=>{this.profile=e,this.editForm={name:e.name||"",email:e.email||"",vehicleType:e.vehicleType||"",vehicleNumber:e.vehicleNumber||""},this.loading=!1},error:()=>this.loading=!1})}toggleEdit(){this.editing=!0,this.successMessage="",this.errorMessage=""}cancelEdit(){this.editing=!1,this.profile&&(this.editForm={name:this.profile.name||"",email:this.profile.email||"",vehicleType:this.profile.vehicleType||"",vehicleNumber:this.profile.vehicleNumber||""})}saveProfile(){this.deliveryService.updateProfile(this.executiveId,this.editForm).subscribe({next:()=>{this.profile&&(this.profile=M(M({},this.profile),this.editForm)),this.editing=!1,this.successMessage="Profile updated successfully!",setTimeout(()=>this.successMessage="",3e3)},error:()=>{this.errorMessage="Failed to update profile. Please try again.",setTimeout(()=>this.errorMessage="",3e3)}})}logout(){this.authService.logout()}static{this.\u0275fac=function(a){return new(a||r)(P(R),P(F))}}static{this.\u0275cmp=y({type:r,selectors:[["app-profile"]],standalone:!0,features:[O],decls:6,vars:2,consts:[[1,"profile-container"],["class","profile-card",4,"ngIf"],["class","loading",4,"ngIf"],[1,"profile-card"],[1,"profile-header"],[1,"avatar"],[1,"profile-info"],[1,"rating"],["class","edit-btn",3,"click",4,"ngIf"],[1,"profile-stats"],[1,"stat"],[1,"value"],[1,"label"],["class","profile-details",4,"ngIf"],["class","profile-edit",4,"ngIf"],["class","message success",4,"ngIf"],["class","message error",4,"ngIf"],["class","quick-actions",4,"ngIf"],[1,"edit-btn",3,"click"],[1,"profile-details"],[1,"detail-row"],[1,"profile-edit"],[1,"form-group"],["type","text","placeholder","Enter your name",3,"ngModelChange","ngModel"],["type","email","placeholder","Enter your email",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],["value",""],["value","BICYCLE"],["value","MOTORCYCLE"],["value","SCOOTER"],["value","CAR"],["type","text","placeholder","Enter vehicle number",3,"ngModelChange","ngModel"],[1,"edit-actions"],[1,"btn-cancel",3,"click"],[1,"btn-save",3,"click"],[1,"message","success"],[1,"message","error"],[1,"quick-actions"],["routerLink","/delivery-executive/orders",1,"action-btn"],[1,"icon"],["routerLink","/delivery-executive/wallet",1,"action-btn"],[1,"action-btn","logout",3,"click"],[1,"loading"]],template:function(a,o){a&1&&(E(0,"app-navbar"),i(1,"div",0)(2,"h2"),n(3,"My Profile"),t(),C(4,J,28,12,"div",1)(5,K,2,0,"div",2),t()),a&2&&(l(4),m("ngIf",o.profile),l(),m("ngIf",o.loading))},dependencies:[k,w,T,I,B,L,A,N,W,V,D,z],styles:[".profile-container[_ngcontent-%COMP%]{padding:24px;max-width:800px;margin:0 auto}h2[_ngcontent-%COMP%]{color:#333;margin-bottom:24px}.profile-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:32px;box-shadow:0 2px 8px #0000001a}.profile-header[_ngcontent-%COMP%]{display:flex;gap:20px;margin-bottom:32px;padding-bottom:24px;border-bottom:1px solid #f0f0f0;align-items:flex-start}.avatar[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;background:linear-gradient(135deg,#00c853,#009624);display:flex;align-items:center;justify-content:center;color:#fff;font-size:32px;font-weight:700;flex-shrink:0}.profile-info[_ngcontent-%COMP%]{flex:1}.profile-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:24px}.profile-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 8px;color:#666}.rating[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;background:#fff3e0;color:#e65100;border-radius:12px;font-weight:600}.edit-btn[_ngcontent-%COMP%]{padding:8px 16px;background:#e3f2fd;color:#1976d2;border:none;border-radius:6px;cursor:pointer;font-weight:500}.profile-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:24px;margin-bottom:32px}.stat[_ngcontent-%COMP%]{text-align:center;padding:20px;background:#f5f7fa;border-radius:8px}.stat[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{display:block;font-size:28px;font-weight:700;color:#333;margin-bottom:8px}.stat[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#666;font-size:14px}.profile-details[_ngcontent-%COMP%]{margin-bottom:24px}.detail-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:16px 0;border-bottom:1px solid #f0f0f0}.detail-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.detail-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#666;font-weight:600}.detail-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#333}.profile-edit[_ngcontent-%COMP%]{margin-bottom:24px}.profile-edit[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 16px;color:#333}.form-group[_ngcontent-%COMP%]{margin-bottom:16px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-weight:600;color:#555}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:12px;border:1px solid #ddd;border-radius:8px;font-size:14px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#00c853}.edit-actions[_ngcontent-%COMP%]{display:flex;gap:12px;margin-top:20px}.btn-cancel[_ngcontent-%COMP%]{padding:10px 20px;background:#f5f5f5;border:1px solid #ddd;border-radius:6px;cursor:pointer}.btn-save[_ngcontent-%COMP%]{padding:10px 20px;background:#00c853;color:#fff;border:none;border-radius:6px;cursor:pointer}.btn-save[_ngcontent-%COMP%]:hover{background:#009624}.message[_ngcontent-%COMP%]{padding:12px;border-radius:6px;margin:16px 0}.message.success[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.message.error[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.quick-actions[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin-top:24px}.action-btn[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:8px;padding:16px;background:#f5f7fa;border-radius:8px;text-decoration:none;color:#333;border:none;cursor:pointer;transition:all .2s}.action-btn[_ngcontent-%COMP%]:hover{background:#e8eaed;transform:translateY(-2px)}.action-btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:24px}.action-btn.logout[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.action-btn.logout[_ngcontent-%COMP%]:hover{background:#ffcdd2}.loading[_ngcontent-%COMP%]{text-align:center;padding:48px;color:#666}"]})}}return r})();export{le as ProfileComponent};
