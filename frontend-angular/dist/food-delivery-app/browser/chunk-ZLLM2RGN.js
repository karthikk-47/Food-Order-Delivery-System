import{a as N}from"./chunk-XJ2DWSVS.js";import{b as H,d as T,g as D,t as A}from"./chunk-2J73YKV5.js";import{a as W}from"./chunk-OU4M4I6I.js";import{a as V}from"./chunk-VW6JM3DE.js";import"./chunk-CFT3KPZ3.js";import{A as c,B as m,Ca as w,Fa as I,J as r,K as P,R as C,Ra as F,T as p,Ua as L,W as E,X as n,Y as t,Z as O,a as M,aa as b,ba as u,ca as s,fa as i,ga as g,ha as x,la as _,ma as v,na as h,pa as y,v as S}from"./chunk-DQHUU6N5.js";function z(a,f){if(a&1){let e=b();n(0,"button",18),u("click",function(){c(e);let o=s(2);return m(o.toggleEdit())}),i(1,"\u270F\uFE0F Edit"),t()}}function B(a,f){if(a&1&&(n(0,"div",19)(1,"div",20)(2,"span",12),i(3,"Email:"),t(),n(4,"span",11),i(5),t()(),n(6,"div",20)(7,"span",12),i(8,"Address:"),t(),n(9,"span",11),i(10),t()(),n(11,"div",20)(12,"span",12),i(13,"FSSAI License:"),t(),n(14,"span",11),i(15),t()(),n(16,"div",20)(17,"span",12),i(18,"Status:"),t(),n(19,"span",21),i(20),t()()()),a&2){let e=s(2);r(5),g(e.profile.email||"Not provided"),r(5),g(e.profile.address||"Not provided"),r(5),g(e.profile.fssaiLicense||"Not provided"),r(4),E(e.profile.approvalStatus==null?null:e.profile.approvalStatus.toLowerCase()),r(),x(" ",e.profile.approvalStatus||"PENDING"," ")}}function j(a,f){if(a&1){let e=b();n(0,"div",22)(1,"h4"),i(2,"Edit Profile"),t(),n(3,"div",23)(4,"label"),i(5,"Name"),t(),n(6,"input",24),h("ngModelChange",function(o){c(e);let d=s(2);return v(d.editForm.name,o)||(d.editForm.name=o),m(o)}),t()(),n(7,"div",23)(8,"label"),i(9,"Email"),t(),n(10,"input",25),h("ngModelChange",function(o){c(e);let d=s(2);return v(d.editForm.email,o)||(d.editForm.email=o),m(o)}),t()(),n(11,"div",23)(12,"label"),i(13,"Address"),t(),n(14,"textarea",26),h("ngModelChange",function(o){c(e);let d=s(2);return v(d.editForm.address,o)||(d.editForm.address=o),m(o)}),t()(),n(15,"div",23)(16,"button",27),u("click",function(){c(e);let o=s(2);return m(o.fillAddressFromLocation())}),i(17),t()(),n(18,"div",23)(19,"label"),i(20,"FSSAI License (Optional)"),t(),n(21,"input",28),h("ngModelChange",function(o){c(e);let d=s(2);return v(d.editForm.fssaiLicense,o)||(d.editForm.fssaiLicense=o),m(o)}),t()(),n(22,"div",29)(23,"button",30),u("click",function(){c(e);let o=s(2);return m(o.cancelEdit())}),i(24,"Cancel"),t(),n(25,"button",31),u("click",function(){c(e);let o=s(2);return m(o.saveProfile())}),i(26,"Save Changes"),t()()()}if(a&2){let e=s(2);r(6),_("ngModel",e.editForm.name),r(4),_("ngModel",e.editForm.email),r(4),_("ngModel",e.editForm.address),r(2),p("disabled",e.locationLoading),r(),x(" ",e.locationLoading?"Detecting location...":"Use Current Location"," "),r(4),_("ngModel",e.editForm.fssaiLicense)}}function q(a,f){if(a&1&&(n(0,"div",32),i(1),t()),a&2){let e=s(2);r(),g(e.successMessage)}}function G(a,f){if(a&1&&(n(0,"div",33),i(1),t()),a&2){let e=s(2);r(),g(e.errorMessage)}}function R(a,f){if(a&1){let e=b();n(0,"div",34)(1,"a",35)(2,"span",36),i(3,"\u{1F37D}\uFE0F"),t(),n(4,"span"),i(5,"Manage Menu"),t()(),n(6,"a",37)(7,"span",36),i(8,"\u{1F4E6}"),t(),n(9,"span"),i(10,"Orders"),t()(),n(11,"button",38),u("click",function(){c(e);let o=s(2);return m(o.logout())}),n(12,"span",36),i(13,"\u{1F6AA}"),t(),n(14,"span"),i(15,"Logout"),t()()()}}function U(a,f){if(a&1&&(n(0,"div",3)(1,"div",4)(2,"div",5),i(3),t(),n(4,"div",6)(5,"h3"),i(6),t(),n(7,"p"),i(8),t(),n(9,"span",7),i(10,"Home Chef"),t()(),C(11,z,2,0,"button",8),t(),n(12,"div",9)(13,"div",10)(14,"span",11),i(15),t(),n(16,"span",12),i(17,"Total Orders"),t()(),n(18,"div",10)(19,"span",11),i(20),t(),n(21,"span",12),i(22,"Total Earnings"),t()(),n(23,"div",10)(24,"span",11),i(25),t(),n(26,"span",12),i(27,"Rating"),t()()(),C(28,B,21,6,"div",13)(29,j,27,6,"div",14)(30,q,2,1,"div",15)(31,G,2,1,"div",16)(32,R,16,0,"div",17),t()),a&2){let e=s();r(3),g((e.profile.name==null?null:e.profile.name.charAt(0))||"H"),r(3),g(e.profile.name),r(2),x("\u{1F4F1} ",e.profile.mobile,""),r(3),p("ngIf",!e.editing),r(4),g(e.profile.totalOrders||0),r(5),x("\u20B9",e.profile.totalEarnings||0,""),r(5),x("\u2B50 ",(e.profile.rating||0).toFixed(1),""),r(3),p("ngIf",!e.editing),r(),p("ngIf",e.editing),r(),p("ngIf",e.successMessage),r(),p("ngIf",e.errorMessage),r(),p("ngIf",!e.editing)}}function Y(a,f){a&1&&(n(0,"div",39),i(1,"Loading profile..."),t())}var oe=(()=>{class a{constructor(e,l){this.homemakerService=e,this.authService=l,this.profile=null,this.loading=!1,this.editing=!1,this.homemakerId=0,this.editForm={name:"",email:"",address:"",fssaiLicense:""},this.successMessage="",this.errorMessage="",this.locationLoading=!1;let o=this.authService.currentUserValue;o&&(this.homemakerId=o.id)}ngOnInit(){this.loadProfile()}loadProfile(){this.loading=!0,this.homemakerService.getProfile(this.homemakerId).subscribe({next:e=>{this.profile=e,this.editForm={name:e.name||"",email:e.email||"",address:e.address||"",fssaiLicense:e.fssaiLicense||""},this.loading=!1},error:()=>this.loading=!1})}toggleEdit(){this.editing=!0,this.successMessage="",this.errorMessage=""}cancelEdit(){this.editing=!1,this.profile&&(this.editForm={name:this.profile.name||"",email:this.profile.email||"",address:this.profile.address||"",fssaiLicense:this.profile.fssaiLicense||""})}saveProfile(){this.homemakerService.updateProfile(this.homemakerId,this.editForm).subscribe({next:()=>{this.profile=M(M({},this.profile),this.editForm),this.editing=!1,this.successMessage="Profile updated successfully!",setTimeout(()=>this.successMessage="",3e3)},error:()=>{this.errorMessage="Failed to update profile. Please try again.",setTimeout(()=>this.errorMessage="",3e3)}})}fillAddressFromLocation(){if(this.errorMessage="",this.successMessage="",!navigator.geolocation){this.errorMessage="Geolocation is not supported by your browser.";return}this.locationLoading=!0,navigator.geolocation.getCurrentPosition(e=>{let l=e.coords.latitude,o=e.coords.longitude;this.homemakerService.reverseGeocode(l,o).subscribe({next:d=>{let k=d?.results?.[0]?.formatted_address||d?.plus_code?.compound_code;k?(this.editForm.address=k,this.successMessage="Address fetched from your current location."):this.errorMessage="Could not determine address for your location.",this.locationLoading=!1},error:()=>{this.errorMessage="Failed to fetch address from location.",this.locationLoading=!1}})},()=>{this.errorMessage="Unable to get your location. Please check location permissions.",this.locationLoading=!1})}logout(){this.authService.logout()}static{this.\u0275fac=function(l){return new(l||a)(P(N),P(V))}}static{this.\u0275cmp=S({type:a,selectors:[["app-homemaker-profile"]],standalone:!0,features:[y],decls:6,vars:2,consts:[[1,"profile-container"],["class","profile-card",4,"ngIf"],["class","loading",4,"ngIf"],[1,"profile-card"],[1,"profile-header"],[1,"avatar"],[1,"profile-info"],[1,"role-badge"],["class","edit-btn",3,"click",4,"ngIf"],[1,"profile-stats"],[1,"stat"],[1,"value"],[1,"label"],["class","profile-details",4,"ngIf"],["class","profile-edit",4,"ngIf"],["class","message success",4,"ngIf"],["class","message error",4,"ngIf"],["class","quick-actions",4,"ngIf"],[1,"edit-btn",3,"click"],[1,"profile-details"],[1,"detail-row"],[1,"value","status"],[1,"profile-edit"],[1,"form-group"],["type","text","placeholder","Enter your name",3,"ngModelChange","ngModel"],["type","email","placeholder","Enter your email",3,"ngModelChange","ngModel"],["placeholder","Enter your kitchen address","rows","3",3,"ngModelChange","ngModel"],["type","button",1,"btn-save",3,"click","disabled"],["type","text","placeholder","Enter FSSAI license number",3,"ngModelChange","ngModel"],[1,"edit-actions"],[1,"btn-cancel",3,"click"],[1,"btn-save",3,"click"],[1,"message","success"],[1,"message","error"],[1,"quick-actions"],["routerLink","/homemaker/menu",1,"action-btn"],[1,"icon"],["routerLink","/homemaker/orders",1,"action-btn"],[1,"action-btn","logout",3,"click"],[1,"loading"]],template:function(l,o){l&1&&(O(0,"app-navbar"),n(1,"div",0)(2,"h2"),i(3,"My Profile"),t(),C(4,U,33,12,"div",1)(5,Y,2,0,"div",2),t()),l&2&&(r(4),p("ngIf",o.profile),r(),p("ngIf",o.loading))},dependencies:[I,w,L,F,A,H,T,D,W],styles:[".profile-container[_ngcontent-%COMP%]{padding:24px;max-width:800px;margin:0 auto}h2[_ngcontent-%COMP%]{color:#333;margin-bottom:24px}.profile-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:32px;box-shadow:0 2px 8px #0000001a}.profile-header[_ngcontent-%COMP%]{display:flex;gap:20px;margin-bottom:32px;padding-bottom:24px;border-bottom:1px solid #f0f0f0;align-items:flex-start}.avatar[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;background:linear-gradient(135deg,#ff8a00,#e67e00);display:flex;align-items:center;justify-content:center;color:#fff;font-size:32px;font-weight:700;flex-shrink:0}.profile-info[_ngcontent-%COMP%]{flex:1}.profile-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:24px}.profile-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 8px;color:#666}.role-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;background:#fff3e0;color:#e65100;border-radius:12px;font-size:12px;font-weight:600}.edit-btn[_ngcontent-%COMP%]{padding:8px 16px;background:#fff3e0;color:#e65100;border:none;border-radius:6px;cursor:pointer;font-weight:500}.profile-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:24px;margin-bottom:32px}.stat[_ngcontent-%COMP%]{text-align:center;padding:20px;background:#f5f7fa;border-radius:8px}.stat[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{display:block;font-size:24px;font-weight:700;color:#333;margin-bottom:8px}.stat[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#666;font-size:14px}.profile-details[_ngcontent-%COMP%]{margin-bottom:24px}.detail-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:16px 0;border-bottom:1px solid #f0f0f0}.detail-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.detail-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#666;font-weight:600}.detail-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#333}.status.approved[_ngcontent-%COMP%]{color:#2e7d32;background:#e8f5e9;padding:4px 12px;border-radius:12px}.status.pending[_ngcontent-%COMP%]{color:#f57c00;background:#fff3e0;padding:4px 12px;border-radius:12px}.status.rejected[_ngcontent-%COMP%]{color:#c62828;background:#ffebee;padding:4px 12px;border-radius:12px}.profile-edit[_ngcontent-%COMP%]{margin-bottom:24px}.profile-edit[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 16px;color:#333}.form-group[_ngcontent-%COMP%]{margin-bottom:16px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-weight:600;color:#555}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:12px;border:1px solid #ddd;border-radius:8px;font-size:14px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#ff8a00}.edit-actions[_ngcontent-%COMP%]{display:flex;gap:12px;margin-top:20px}.btn-cancel[_ngcontent-%COMP%]{padding:10px 20px;background:#f5f5f5;border:1px solid #ddd;border-radius:6px;cursor:pointer}.btn-save[_ngcontent-%COMP%]{padding:10px 20px;background:#ff8a00;color:#fff;border:none;border-radius:6px;cursor:pointer}.btn-save[_ngcontent-%COMP%]:hover{background:#e67e00}.message[_ngcontent-%COMP%]{padding:12px;border-radius:6px;margin:16px 0}.message.success[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.message.error[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.quick-actions[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin-top:24px}.action-btn[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:8px;padding:16px;background:#f5f7fa;border-radius:8px;text-decoration:none;color:#333;border:none;cursor:pointer;transition:all .2s}.action-btn[_ngcontent-%COMP%]:hover{background:#e8eaed;transform:translateY(-2px)}.action-btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:24px}.action-btn.logout[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.loading[_ngcontent-%COMP%]{text-align:center;padding:48px;color:#666}"]})}}return a})();export{oe as HomemakerProfileComponent};
