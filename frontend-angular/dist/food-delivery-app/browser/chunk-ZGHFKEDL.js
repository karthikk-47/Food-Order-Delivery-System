import{a as Q}from"./chunk-VKWABXI3.js";import{b as A,d as R,g as N,l as z,m as V,n as W,t as U}from"./chunk-2J73YKV5.js";import{a as B}from"./chunk-OU4M4I6I.js";import"./chunk-VW6JM3DE.js";import"./chunk-CFT3KPZ3.js";import{A as f,B as P,Ba as D,Ca as I,Fa as T,J as r,K as y,R as C,T as c,Ua as F,V as S,W as h,X as n,Y as t,Z as x,aa as v,ba as p,ca as m,fa as o,ga as d,ha as u,ia as L,ja as w,la as M,ma as O,na as b,pa as k,v as E}from"./chunk-DQHUU6N5.js";function Y(i,s){if(i&1&&(n(0,"option",24),o(1),t()),i&2){let e=s.$implicit;c("value",e),r(),d(e)}}function G(i,s){if(i&1&&(n(0,"option",24),o(1),t()),i&2){let e=s.$implicit;c("value",e),r(),d(e)}}function H(i,s){if(i&1&&(n(0,"div",25)(1,"span"),o(2,"\u274C"),t(),o(3),t()),i&2){let e=m();r(3),u(" ",e.error," ")}}function j(i,s){i&1&&(n(0,"div",26),x(1,"div",27),n(2,"p"),o(3,"Loading logs..."),t()())}function K(i,s){if(i&1&&(n(0,"span"),o(1),t()),i&2){let e=m().$implicit;r(),d(e.userMobile)}}function X(i,s){if(i&1&&(n(0,"span",39),o(1),t()),i&2){let e=m().$implicit;r(),d(e.userRole)}}function $(i,s){if(i&1&&(n(0,"tr")(1,"td",32),o(2),t(),n(3,"td")(4,"span",33),o(5),t()(),n(6,"td")(7,"span",34),o(8),t()(),n(9,"td",35),o(10),t(),n(11,"td",36),o(12),t(),n(13,"td",37),C(14,K,2,1,"span",31)(15,X,2,1,"span",38),t()()),i&2){let e=s.$implicit,l=m(2);h(l.getLevelClass(e.level)),r(2),d(l.formatTimestamp(e.timestamp)),r(2),h(l.getLevelClass(e.level)),r(),u(" ",e.level," "),r(3),L(" ",l.getCategoryIcon(e.category)," ",e.category," "),r(2),d(e.action),r(2),d(e.message),r(2),c("ngIf",e.userMobile),r(),c("ngIf",e.userRole)}}function q(i,s){i&1&&(n(0,"tr")(1,"td",40),o(2,"No logs found"),t()())}function J(i,s){if(i&1&&(n(0,"div",28)(1,"table",29)(2,"thead")(3,"tr")(4,"th"),o(5,"Timestamp"),t(),n(6,"th"),o(7,"Level"),t(),n(8,"th"),o(9,"Category"),t(),n(10,"th"),o(11,"Action"),t(),n(12,"th"),o(13,"Message"),t(),n(14,"th"),o(15,"User"),t()()(),n(16,"tbody"),C(17,$,16,12,"tr",30)(18,q,3,0,"tr",31),t()()()),i&2){let e=m();r(17),c("ngForOf",e.logs),r(),c("ngIf",e.logs.length===0)}}function Z(i,s){if(i&1){let e=v();n(0,"button",46),p("click",function(){let a=f(e).$implicit,g=m(2);return P(g.goToPage(a))}),o(1),t()}if(i&2){let e=s.$implicit,l=m(2);S("active",e===l.currentPage),r(),u(" ",e+1," ")}}function ee(i,s){if(i&1){let e=v();n(0,"div",41)(1,"button",42),p("click",function(){f(e);let a=m();return P(a.prevPage())}),o(2," \u2190 Previous "),t(),n(3,"div",43),C(4,Z,2,3,"button",44),t(),n(5,"button",42),p("click",function(){f(e);let a=m();return P(a.nextPage())}),o(6," Next \u2192 "),t(),n(7,"span",45),o(8),t()()}if(i&2){let e=m();r(),c("disabled",e.currentPage===0),r(3),c("ngForOf",e.getPageNumbers()),r(),c("disabled",e.currentPage>=e.totalPages-1),r(3),w(" Page ",e.currentPage+1," of ",e.totalPages," (",e.totalElements," total) ")}}var se=(()=>{class i{constructor(e){this.adminService=e,this.logs=[],this.statistics={},this.loading=!1,this.error="",this.currentPage=0,this.pageSize=50,this.totalPages=0,this.totalElements=0,this.selectedLevel="",this.selectedCategory="",this.searchQuery="",this.levels=["INFO","WARNING","ERROR","DEBUG"],this.categories=["AUTH","USER","HOMEMAKER","EXECUTIVE","ORDER","PAYMENT","APPROVAL","SYSTEM","ADMIN"]}ngOnInit(){this.loadLogs(),this.loadStatistics()}loadLogs(){this.loading=!0,this.error="",this.adminService.getLogs(this.currentPage,this.pageSize,this.selectedLevel,this.selectedCategory,this.searchQuery).subscribe({next:e=>{this.logs=e.content||[],this.totalPages=e.totalPages||0,this.totalElements=e.totalElements||0,this.loading=!1},error:e=>{console.error("Error loading logs:",e),this.error="Failed to load logs",this.loading=!1}})}loadStatistics(){this.adminService.getLogStatistics().subscribe({next:e=>{this.statistics=e},error:e=>console.error("Error loading statistics:",e)})}applyFilters(){this.currentPage=0,this.loadLogs()}clearFilters(){this.selectedLevel="",this.selectedCategory="",this.searchQuery="",this.currentPage=0,this.loadLogs()}nextPage(){this.currentPage<this.totalPages-1&&(this.currentPage++,this.loadLogs())}prevPage(){this.currentPage>0&&(this.currentPage--,this.loadLogs())}goToPage(e){this.currentPage=e,this.loadLogs()}refreshLogs(){this.loadLogs(),this.loadStatistics()}getLevelClass(e){switch(e){case"ERROR":return"level-error";case"WARNING":return"level-warning";case"INFO":return"level-info";case"DEBUG":return"level-debug";default:return""}}getCategoryIcon(e){switch(e){case"AUTH":return"\u{1F510}";case"USER":return"\u{1F464}";case"HOMEMAKER":return"\u{1F468}\u200D\u{1F373}";case"EXECUTIVE":return"\u{1F697}";case"ORDER":return"\u{1F4E6}";case"PAYMENT":return"\u{1F4B3}";case"APPROVAL":return"\u2705";case"SYSTEM":return"\u2699\uFE0F";case"ADMIN":return"\u{1F451}";default:return"\u{1F4CB}"}}formatTimestamp(e){return new Date(e).toLocaleString()}getPageNumbers(){let e=[],l=Math.max(0,this.currentPage-2),a=Math.min(this.totalPages,l+5);for(let g=l;g<a;g++)e.push(g);return e}static{this.\u0275fac=function(l){return new(l||i)(y(Q))}}static{this.\u0275cmp=E({type:i,selectors:[["app-logs-dashboard"]],standalone:!0,features:[k],decls:70,vars:13,consts:[[1,"logs-container"],[1,"header"],[1,"header-content"],[1,"subtitle"],[1,"btn-refresh",3,"click"],[1,"stats-cards"],[1,"stat-card"],[1,"stat-icon"],[1,"stat-content"],[1,"stat-card","error"],[1,"stat-card","warning"],[1,"filters-section"],[1,"filter-group"],[3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"filter-group","search"],["type","text","placeholder","Search logs...",3,"ngModelChange","keyup.enter","ngModel"],[1,"btn-filter",3,"click"],[1,"btn-clear",3,"click"],["class","alert alert-error",4,"ngIf"],["class","loading-container",4,"ngIf"],["class","logs-table-container",4,"ngIf"],["class","pagination",4,"ngIf"],[3,"value"],[1,"alert","alert-error"],[1,"loading-container"],[1,"spinner"],[1,"logs-table-container"],[1,"logs-table"],[3,"class",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"timestamp"],[1,"level-badge"],[1,"category-badge"],[1,"action"],[1,"message"],[1,"user"],["class","role-badge",4,"ngIf"],[1,"role-badge"],["colspan","6",1,"no-data"],[1,"pagination"],[3,"click","disabled"],[1,"page-numbers"],[3,"active","click",4,"ngFor","ngForOf"],[1,"page-info"],[3,"click"]],template:function(l,a){l&1&&(x(0,"app-navbar"),n(1,"div",0)(2,"div",1)(3,"div",2)(4,"h1"),o(5,"\u{1F4CB} Activity Logs"),t(),n(6,"p",3),o(7,"Monitor system activity and events"),t()(),n(8,"button",4),p("click",function(){return a.refreshLogs()}),o(9," \u{1F504} Refresh "),t()(),n(10,"div",5)(11,"div",6)(12,"div",7),o(13,"\u{1F4CA}"),t(),n(14,"div",8)(15,"h3"),o(16),t(),n(17,"p"),o(18,"Total Logs"),t()()(),n(19,"div",9)(20,"div",7),o(21,"\u274C"),t(),n(22,"div",8)(23,"h3"),o(24),t(),n(25,"p"),o(26,"Errors (24h)"),t()()(),n(27,"div",10)(28,"div",7),o(29,"\u26A0\uFE0F"),t(),n(30,"div",8)(31,"h3"),o(32),t(),n(33,"p"),o(34,"Warnings (24h)"),t()()(),n(35,"div",6)(36,"div",7),o(37,"\u{1F4C5}"),t(),n(38,"div",8)(39,"h3"),o(40),t(),n(41,"p"),o(42,"Errors (Week)"),t()()()(),n(43,"div",11)(44,"div",12)(45,"label"),o(46,"Level"),t(),n(47,"select",13),b("ngModelChange",function(_){return O(a.selectedLevel,_)||(a.selectedLevel=_),_}),p("change",function(){return a.applyFilters()}),n(48,"option",14),o(49,"All Levels"),t(),C(50,Y,2,2,"option",15),t()(),n(51,"div",12)(52,"label"),o(53,"Category"),t(),n(54,"select",13),b("ngModelChange",function(_){return O(a.selectedCategory,_)||(a.selectedCategory=_),_}),p("change",function(){return a.applyFilters()}),n(55,"option",14),o(56,"All Categories"),t(),C(57,G,2,2,"option",15),t()(),n(58,"div",16)(59,"label"),o(60,"Search"),t(),n(61,"input",17),b("ngModelChange",function(_){return O(a.searchQuery,_)||(a.searchQuery=_),_}),p("keyup.enter",function(){return a.applyFilters()}),t()(),n(62,"button",18),p("click",function(){return a.applyFilters()}),o(63,"Apply"),t(),n(64,"button",19),p("click",function(){return a.clearFilters()}),o(65,"Clear"),t()(),C(66,H,4,1,"div",20)(67,j,4,0,"div",21)(68,J,19,2,"div",22)(69,ee,9,6,"div",23),t()),l&2&&(r(16),d(a.statistics.totalLogs||0),r(8),d(a.statistics.errorsLast24h||0),r(8),d(a.statistics.warningsLast24h||0),r(8),d(a.statistics.errorsLastWeek||0),r(7),M("ngModel",a.selectedLevel),r(3),c("ngForOf",a.levels),r(4),M("ngModel",a.selectedCategory),r(3),c("ngForOf",a.categories),r(4),M("ngModel",a.searchQuery),r(5),c("ngIf",a.error),r(),c("ngIf",a.loading),r(),c("ngIf",!a.loading),r(),c("ngIf",a.totalPages>1))},dependencies:[T,D,I,U,V,W,A,z,R,N,F,B],styles:[".logs-container[_ngcontent-%COMP%]{padding:2rem;max-width:1600px;margin:0 auto;background:#f5f7fa;min-height:100vh}.logs-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}.logs-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;color:#2c3e50;margin:0}.logs-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#7f8c8d;margin:.25rem 0 0}.logs-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .btn-refresh[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background:#667eea;color:#fff;border:none;border-radius:8px;cursor:pointer;font-weight:600;transition:all .3s ease}.logs-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .btn-refresh[_ngcontent-%COMP%]:hover{background:#5a6fd6;transform:translateY(-2px)}.logs-container[_ngcontent-%COMP%]   .stats-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1.5rem;margin-bottom:2rem}.logs-container[_ngcontent-%COMP%]   .stats-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1.5rem;display:flex;align-items:center;gap:1rem;box-shadow:0 2px 8px #0000000d}.logs-container[_ngcontent-%COMP%]   .stats-cards[_ngcontent-%COMP%]   .stat-card.error[_ngcontent-%COMP%]{border-left:4px solid #e74c3c}.logs-container[_ngcontent-%COMP%]   .stats-cards[_ngcontent-%COMP%]   .stat-card.warning[_ngcontent-%COMP%]{border-left:4px solid #f39c12}.logs-container[_ngcontent-%COMP%]   .stats-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{font-size:2rem}.logs-container[_ngcontent-%COMP%]   .stats-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.8rem;color:#2c3e50;margin:0}.logs-container[_ngcontent-%COMP%]   .stats-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#7f8c8d;margin:0;font-size:.9rem}.logs-container[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1.5rem;margin-bottom:1.5rem;display:flex;flex-wrap:wrap;gap:1rem;align-items:flex-end;box-shadow:0 2px 8px #0000000d}.logs-container[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.logs-container[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-group.search[_ngcontent-%COMP%]{flex:1;min-width:200px}.logs-container[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.85rem;color:#7f8c8d;font-weight:600}.logs-container[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .logs-container[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.75rem 1rem;border:2px solid #e0e0e0;border-radius:8px;font-size:.95rem;min-width:150px}.logs-container[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .logs-container[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea}.logs-container[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .btn-filter[_ngcontent-%COMP%], .logs-container[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .btn-clear[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:none;border-radius:8px;cursor:pointer;font-weight:600;transition:all .3s ease}.logs-container[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .btn-filter[_ngcontent-%COMP%]{background:#667eea;color:#fff}.logs-container[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .btn-filter[_ngcontent-%COMP%]:hover{background:#5a6fd6}.logs-container[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .btn-clear[_ngcontent-%COMP%]{background:#ecf0f1;color:#7f8c8d}.logs-container[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .btn-clear[_ngcontent-%COMP%]:hover{background:#bdc3c7}.logs-container[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{padding:1rem;border-radius:8px;margin-bottom:1rem;display:flex;align-items:center;gap:.5rem}.logs-container[_ngcontent-%COMP%]   .alert.alert-error[_ngcontent-%COMP%]{background:#fef2f2;color:#dc2626;border:1px solid #fecaca}.logs-container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:3rem}.logs-container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid #f3f3f3;border-top:3px solid #667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.logs-container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#7f8c8d;margin-top:1rem}.logs-container[_ngcontent-%COMP%]   .logs-table-container[_ngcontent-%COMP%]{background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 2px 8px #0000000d}.logs-container[_ngcontent-%COMP%]   .logs-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.logs-container[_ngcontent-%COMP%]   .logs-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .logs-container[_ngcontent-%COMP%]   .logs-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;text-align:left;border-bottom:1px solid #ecf0f1}.logs-container[_ngcontent-%COMP%]   .logs-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;color:#2c3e50;font-size:.9rem;text-transform:uppercase;letter-spacing:.5px}.logs-container[_ngcontent-%COMP%]   .logs-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background .2s ease}.logs-container[_ngcontent-%COMP%]   .logs-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8f9fa}.logs-container[_ngcontent-%COMP%]   .logs-table[_ngcontent-%COMP%]   tr.level-error[_ngcontent-%COMP%]{background:#fef2f2}.logs-container[_ngcontent-%COMP%]   .logs-table[_ngcontent-%COMP%]   tr.level-warning[_ngcontent-%COMP%]{background:#fffbeb}.logs-container[_ngcontent-%COMP%]   .logs-table[_ngcontent-%COMP%]   .timestamp[_ngcontent-%COMP%]{font-size:.85rem;color:#7f8c8d;white-space:nowrap}.logs-container[_ngcontent-%COMP%]   .logs-table[_ngcontent-%COMP%]   .level-badge[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:20px;font-size:.75rem;font-weight:600;text-transform:uppercase}.logs-container[_ngcontent-%COMP%]   .logs-table[_ngcontent-%COMP%]   .level-badge.level-error[_ngcontent-%COMP%]{background:#fecaca;color:#dc2626}.logs-container[_ngcontent-%COMP%]   .logs-table[_ngcontent-%COMP%]   .level-badge.level-warning[_ngcontent-%COMP%]{background:#fef3c7;color:#d97706}.logs-container[_ngcontent-%COMP%]   .logs-table[_ngcontent-%COMP%]   .level-badge.level-info[_ngcontent-%COMP%]{background:#dbeafe;color:#2563eb}.logs-container[_ngcontent-%COMP%]   .logs-table[_ngcontent-%COMP%]   .level-badge.level-debug[_ngcontent-%COMP%]{background:#e5e7eb;color:#6b7280}.logs-container[_ngcontent-%COMP%]   .logs-table[_ngcontent-%COMP%]   .category-badge[_ngcontent-%COMP%]{font-size:.9rem}.logs-container[_ngcontent-%COMP%]   .logs-table[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{font-weight:600;color:#2c3e50}.logs-container[_ngcontent-%COMP%]   .logs-table[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{max-width:300px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.logs-container[_ngcontent-%COMP%]   .logs-table[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .role-badge[_ngcontent-%COMP%]{font-size:.75rem;background:#e5e7eb;padding:.2rem .5rem;border-radius:4px;margin-left:.5rem}.logs-container[_ngcontent-%COMP%]   .logs-table[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]{text-align:center;color:#7f8c8d;padding:2rem}.logs-container[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:1rem;margin-top:1.5rem;padding:1rem;background:#fff;border-radius:12px}.logs-container[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem 1rem;border:2px solid #e0e0e0;background:#fff;border-radius:8px;cursor:pointer;transition:all .3s ease}.logs-container[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){border-color:#667eea;color:#667eea}.logs-container[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.logs-container[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#667eea;color:#fff;border-color:#667eea}.logs-container[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .page-numbers[_ngcontent-%COMP%]{display:flex;gap:.5rem}.logs-container[_ngcontent-%COMP%]   .pagination[_ngcontent-%COMP%]   .page-info[_ngcontent-%COMP%]{color:#7f8c8d;font-size:.9rem;margin-left:1rem}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}"]})}}return i})();export{se as LogsDashboardComponent};
