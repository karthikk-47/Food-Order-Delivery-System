import{t as z}from"./chunk-2J73YKV5.js";import{a as F}from"./chunk-OU4M4I6I.js";import"./chunk-VW6JM3DE.js";import{a as j}from"./chunk-CFT3KPZ3.js";import{A as d,B as u,Ba as w,Ca as I,Fa as E,I as S,Ia as D,J as c,K as b,Qa as T,R as x,T as s,Ua as V,X as i,Y as e,Z as v,aa as f,ba as g,ca as p,d as y,fa as o,ga as h,ha as _,m as C,p as O,pa as k,s as M,v as P}from"./chunk-DQHUU6N5.js";var $=(()=>{class n{constructor(t){this.http=t,this.apiUrl=`${j.apiUrl}/cart`,this.cartSubject=new y(null),this.cart$=this.cartSubject.asObservable(),this.loadCart()}loadCart(){this.getCart().subscribe({next:t=>this.cartSubject.next(t),error:()=>this.cartSubject.next(null)})}getCart(){return this.http.get(this.apiUrl)}addToCart(t,a,r=1,m){return this.http.post(`${this.apiUrl}/items`,{menuItemId:t,homemakerId:a,quantity:r,specialInstructions:m}).pipe(C(q=>this.cartSubject.next(q)))}updateCartItem(t,a,r){return this.http.put(`${this.apiUrl}/items/${t}`,{quantity:a,specialInstructions:r}).pipe(C(m=>this.cartSubject.next(m)))}removeFromCart(t){return this.http.delete(`${this.apiUrl}/items/${t}`).pipe(C(a=>this.cartSubject.next(a)))}clearCart(){return this.http.delete(this.apiUrl).pipe(C(()=>this.cartSubject.next(null)))}refreshCart(){this.loadCart()}getItemCount(){return this.cartSubject.value?.itemCount||0}static{this.\u0275fac=function(a){return new(a||n)(M(D))}}static{this.\u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function N(n,l){if(n&1&&(i(0,"span",7),o(1),e()),n&2){let t=p();c(),_("",t.cart==null?null:t.cart.itemCount," items")}}function Q(n,l){n&1&&(i(0,"div",8),v(1,"div",9),i(2,"p"),o(3,"Loading cart..."),e()())}function R(n,l){if(n&1){let t=f();i(0,"div",10)(1,"p"),o(2),e(),i(3,"button",11),g("click",function(){d(t);let r=p();return u(r.loadCart())}),o(4,"Retry"),e()()}if(n&2){let t=p();c(2),h(t.error)}}function A(n,l){if(n&1){let t=f();i(0,"div",12)(1,"div",13),o(2,"\u{1F6D2}"),e(),i(3,"h2"),o(4,"Your cart is empty"),e(),i(5,"p"),o(6,"Looks like you haven't added anything to your cart yet."),e(),i(7,"button",14),g("click",function(){d(t);let r=p();return u(r.continueShopping())}),o(8,"Browse Food"),e()()}}function L(n,l){n&1&&(i(0,"span",38),o(1,"\u{1F96C}"),e())}function Y(n,l){if(n&1&&(i(0,"p",39),o(1),e()),n&2){let t=p().$implicit;c(),h(t.description)}}function H(n,l){if(n&1&&(i(0,"p",40),o(1),e()),n&2){let t=p().$implicit;c(),_(" \u{1F4DD} ",t.specialInstructions," ")}}function G(n,l){if(n&1){let t=f();i(0,"div",24)(1,"div",25),v(2,"img",26),x(3,L,2,0,"span",27),e(),i(4,"div",28)(5,"h3"),o(6),e(),i(7,"p",29),o(8),e(),x(9,Y,2,1,"p",30)(10,H,2,1,"p",31),e(),i(11,"div",32),o(12),e(),i(13,"div",33)(14,"button",34),g("click",function(){let r=d(t).$implicit,m=p(2);return u(m.updateQuantity(r,-1))}),o(15,"\u2212"),e(),i(16,"span",35),o(17),e(),i(18,"button",34),g("click",function(){let r=d(t).$implicit,m=p(2);return u(m.updateQuantity(r,1))}),o(19,"+"),e()(),i(20,"div",36),o(21),e(),i(22,"button",37),g("click",function(){let r=d(t).$implicit,m=p(2);return u(m.removeItem(r))}),o(23," \u{1F5D1}\uFE0F "),e()()}if(n&2){let t=l.$implicit;c(2),s("src",t.imageUrl||"assets/food-placeholder.png",S)("alt",t.itemName),c(),s("ngIf",t.isVegetarian),c(3),h(t.itemName),c(2),_("by ",t.homemakerName,""),c(),s("ngIf",t.description),c(),s("ngIf",t.specialInstructions),c(2),_("\u20B9",t.price,""),c(5),h(t.quantity),c(4),_("\u20B9",t.subtotal,"")}}function J(n,l){if(n&1){let t=f();i(0,"div",15)(1,"div",16),x(2,G,24,10,"div",17),e(),i(3,"div",18)(4,"h2"),o(5,"Order Summary"),e(),i(6,"div",19)(7,"span"),o(8,"Subtotal"),e(),i(9,"span"),o(10),e()(),i(11,"div",19)(12,"span"),o(13,"Delivery Fee"),e(),i(14,"span"),o(15),e()(),i(16,"div",20)(17,"span"),o(18,"Total"),e(),i(19,"span"),o(20),e()(),i(21,"div",21)(22,"button",22),g("click",function(){d(t);let r=p();return u(r.clearCart())}),o(23,"Clear Cart"),e(),i(24,"button",14),g("click",function(){d(t);let r=p();return u(r.proceedToCheckout())}),o(25," Proceed to Checkout "),e()(),i(26,"button",23),g("click",function(){d(t);let r=p();return u(r.continueShopping())}),o(27," \u2190 Continue Shopping "),e()()()}if(n&2){let t=p();c(2),s("ngForOf",t.cart.items),c(8),_("\u20B9",t.cart.totalAmount,""),c(5),_("\u20B9",t.cart.deliveryFee,""),c(5),_("\u20B9",t.cart.grandTotal,"")}}var ot=(()=>{class n{constructor(t,a){this.cartService=t,this.router=a,this.cart=null,this.loading=!1,this.error=""}ngOnInit(){this.loadCart(),this.subscription=this.cartService.cart$.subscribe(t=>{this.cart=t})}ngOnDestroy(){this.subscription?.unsubscribe()}loadCart(){this.loading=!0,this.cartService.getCart().subscribe({next:t=>{this.cart=t,this.loading=!1},error:t=>{this.error="Failed to load cart",this.loading=!1}})}updateQuantity(t,a){let r=t.quantity+a;if(r<1){this.removeItem(t);return}this.cartService.updateCartItem(t.id,r).subscribe()}removeItem(t){this.cartService.removeFromCart(t.id).subscribe()}clearCart(){confirm("Are you sure you want to clear your cart?")&&this.cartService.clearCart().subscribe(()=>{this.cart=null})}proceedToCheckout(){this.cart&&this.cart.items.length>0&&this.router.navigate(["/user/checkout"])}continueShopping(){this.router.navigate(["/user/browse"])}static{this.\u0275fac=function(a){return new(a||n)(b($),b(T))}}static{this.\u0275cmp=P({type:n,selectors:[["app-cart"]],standalone:!0,features:[k],decls:10,vars:5,consts:[[1,"cart-container"],[1,"cart-header"],["class","item-count",4,"ngIf"],["class","loading",4,"ngIf"],["class","error",4,"ngIf"],["class","empty-cart",4,"ngIf"],["class","cart-content",4,"ngIf"],[1,"item-count"],[1,"loading"],[1,"spinner"],[1,"error"],[3,"click"],[1,"empty-cart"],[1,"empty-icon"],[1,"btn-primary",3,"click"],[1,"cart-content"],[1,"cart-items"],["class","cart-item",4,"ngFor","ngForOf"],[1,"cart-summary"],[1,"summary-row"],[1,"summary-row","total"],[1,"cart-actions"],[1,"btn-secondary",3,"click"],[1,"btn-link",3,"click"],[1,"cart-item"],[1,"item-image"],[3,"src","alt"],["class","veg-badge",4,"ngIf"],[1,"item-details"],[1,"homemaker"],["class","description",4,"ngIf"],["class","instructions",4,"ngIf"],[1,"item-price"],[1,"quantity-controls"],[1,"qty-btn",3,"click"],[1,"quantity"],[1,"item-subtotal"],["title","Remove item",1,"remove-btn",3,"click"],[1,"veg-badge"],[1,"description"],[1,"instructions"]],template:function(a,r){a&1&&(v(0,"app-navbar"),i(1,"div",0)(2,"div",1)(3,"h1"),o(4,"\u{1F6D2} Your Cart"),e(),x(5,N,2,1,"span",2),e(),x(6,Q,4,0,"div",3)(7,R,5,1,"div",4)(8,A,9,0,"div",5)(9,J,28,4,"div",6),e()),a&2&&(c(5),s("ngIf",r.cart==null?null:r.cart.itemCount),c(),s("ngIf",r.loading),c(),s("ngIf",r.error),c(),s("ngIf",!r.loading&&(!r.cart||r.cart.items.length===0)),c(),s("ngIf",!r.loading&&r.cart&&r.cart.items.length>0))},dependencies:[E,w,I,V,z,F],styles:[".cart-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px}.cart-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;margin-bottom:24px}.cart-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:28px;color:#333}.cart-header[_ngcontent-%COMP%]   .item-count[_ngcontent-%COMP%]{background:#00c853;color:#fff;padding:4px 12px;border-radius:20px;font-size:14px}.loading[_ngcontent-%COMP%], .error[_ngcontent-%COMP%], .empty-cart[_ngcontent-%COMP%]{text-align:center;padding:60px 20px}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #f3f3f3;border-top:4px solid #00c853;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 16px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.empty-cart[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:80px;margin-bottom:16px}.empty-cart[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;margin-bottom:8px}.empty-cart[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin-bottom:24px}.cart-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 350px;gap:24px}@media (max-width: 768px){.cart-content[_ngcontent-%COMP%]{grid-template-columns:1fr}}.cart-items[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.cart-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:80px 1fr auto auto auto auto;gap:16px;align-items:center;padding:16px;background:#fff;border-radius:12px;box-shadow:0 2px 8px #00000014}@media (max-width: 600px){.cart-item[_ngcontent-%COMP%]{grid-template-columns:60px 1fr;gap:12px}}.item-image[_ngcontent-%COMP%]{position:relative}.item-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;height:80px;object-fit:cover;border-radius:8px}.item-image[_ngcontent-%COMP%]   .veg-badge[_ngcontent-%COMP%]{position:absolute;top:-4px;right:-4px;font-size:16px}.item-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 4px;font-size:16px;color:#333}.item-details[_ngcontent-%COMP%]   .homemaker[_ngcontent-%COMP%]{font-size:13px;color:#666;margin:0 0 4px}.item-details[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:12px;color:#888;margin:0}.item-details[_ngcontent-%COMP%]   .instructions[_ngcontent-%COMP%]{font-size:12px;color:#00c853;margin:4px 0 0}.item-price[_ngcontent-%COMP%]{font-weight:600;color:#333}.quantity-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.quantity-controls[_ngcontent-%COMP%]   .qty-btn[_ngcontent-%COMP%]{width:32px;height:32px;border:1px solid #ddd;background:#fff;border-radius:6px;cursor:pointer;font-size:18px}.quantity-controls[_ngcontent-%COMP%]   .qty-btn[_ngcontent-%COMP%]:hover{background:#f5f5f5}.quantity-controls[_ngcontent-%COMP%]   .quantity[_ngcontent-%COMP%]{min-width:24px;text-align:center;font-weight:600}.item-subtotal[_ngcontent-%COMP%]{font-weight:700;color:#00c853;font-size:16px}.remove-btn[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;font-size:18px;opacity:.6}.remove-btn[_ngcontent-%COMP%]:hover{opacity:1}.cart-summary[_ngcontent-%COMP%]{background:#fff;padding:24px;border-radius:12px;box-shadow:0 2px 8px #00000014;height:fit-content;position:sticky;top:20px}.cart-summary[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 20px;font-size:20px;color:#333}.summary-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:12px 0;border-bottom:1px solid #eee}.summary-row.total[_ngcontent-%COMP%]{border-bottom:none;font-size:18px;font-weight:700;color:#00c853;padding-top:16px}.cart-actions[_ngcontent-%COMP%]{display:flex;gap:12px;margin-top:24px}.cart-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1}.btn-primary[_ngcontent-%COMP%]{background:#00c853;color:#fff;border:none;padding:14px 24px;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer}.btn-primary[_ngcontent-%COMP%]:hover{background:#009624}.btn-secondary[_ngcontent-%COMP%]{background:#fff;color:#666;border:1px solid #ddd;padding:14px 24px;border-radius:8px;font-size:16px;cursor:pointer}.btn-secondary[_ngcontent-%COMP%]:hover{background:#f5f5f5}.btn-link[_ngcontent-%COMP%]{display:block;width:100%;text-align:center;margin-top:16px;background:none;border:none;color:#00c853;cursor:pointer;font-size:14px}.btn-link[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})}}return n})();export{ot as CartComponent};
